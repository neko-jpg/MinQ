# MinQ アプリ仕様書

このドキュメントは、`lib/presentation/screens` ディレクトリ内のソースコードを基に、現在実装されている画面とその機能をまとめたものです。

## 共通・基盤

### `shell_screen.dart`
- **概要**: アプリケーション全体の骨格となる画面。下部ナビゲーションバーを提供し、各メイン画面への遷移を管理する。
- **機能**:
  - **下部ナビゲーション**:
    - ホーム (Home)
    - 進捗 (Stats)
    - ペア (Pair)
    - クエスト一覧 (Quests)
    - 設定 (Settings)
  - **画面遷移**: 選択されたタブに応じて、対応する画面を表示する。

---

## オンボーディング・認証

### `onboarding_screen.dart` (ウェルカム画面)
- **概要**: アプリの初回起動時に表示される静的なウェルカム画面。
- **機能**:
  - **機能紹介**: アプリの主要な特徴（3タップ習慣化、匿名ペア、ミニクエスト）をカード形式で表示する。
  - **画面遷移**: 「始める」または「ログイン」ボタンをタップすると、ログイン画面 (`login_screen.dart`) へ遷移する。

### `login_screen.dart`
- **概要**: ユーザーがアプリを利用開始するための認証画面。
- **機能**:
  - **ソーシャルログイン**:
    - Googleで続行
    - Appleで続行
    - ゲストとして続行
    - メールで続行
  - **規約同意**: ログインボタンの下に、利用規約とプライバシーポリシーへの同意文言とリンクを表示。

---

## メイン機能

### `home_screen.dart`
- **概要**: ログイン後のメイン画面。今日のフォーカス、クエスト、統計情報をダッシュボード形式で表示する。
- **機能**:
  - **ヘッダー**: 「ホーム」というタイトルを表示。
  - **今日のフォーカス**: ユーザーのクエストの中から一つをピックアップして表示。
  - **あなたのミニクエスト**: ユーザーが設定したクエストをグリッド表示。完了状態も示す。FAB（フローティングアクションボタン）からクエスト作成画面へ遷移。
  - **統計スナップショット**: 「継続日数」「完了クエスト数」「パートナー進捗」を円形プログレスバーで可視化。
  - **週間ストリーク**: 過去一週間のクエスト達成状況を曜日ごとに表示。

### `quests_screen.dart`
- **概要**: 実行するミニクエストを探したり、自分で作成したりする画面。
- **機能**:
  - **クエスト検索**: キーワードでテンプレートクエストを検索。
  - **カテゴリフィルター**: おすすめ、マイクエスト、その他カテゴリでフィルタリング。
  - **クエスト一覧表示**: カテゴリに応じてクエストをグリッド表示。
  - **カスタムクエスト作成**: FABをタップしてクエスト作成画面 (`create_quest_screen.dart`) へ遷移。

### `create_quest_screen.dart` (習慣追加画面)
- **概要**: 新しい習慣（ミニクエスト）を作成する画面。より直感的で詳細な設定が可能になった。
- **機能**:
  - **習慣の名前**: テキスト入力。
  - **アイコンと色**: アイコンピッカーとカラーパレットから、クエストに紐づくアイコンと色を選択。
  - **目標**: 「時間」または「回数」を切り替え、目標とする数値を入力。
  - **頻度**: 実行する曜日を複数選択。
  - **リマインダー**: ON/OFFの切り替えと、通知時刻の設定。
  - **保存機能**: 作成した習慣を保存する。

### `record_screen.dart`
- **概要**: クエストの完了を記録するための画面。
- **機能**:
  - **クエスト情報表示**: 実行するクエストのタイトルや時間を表示。
  - **証拠の提出方法選択**: 写真撮影または自己申告で完了を記録。
  - **エラーハンドリング**: オフラインやカメラ権限エラーなどに対応。

### `celebration_screen.dart`
- **概要**: クエスト完了直後に表示され、ユーザーの達成を祝う画面。
- **機能**:
  - **達成アニメーション**: 継続日数に応じたアニメーションを表示。
  - **継続日数の表示**: 現在の継続日数を表示。
  - **リワード**: 達成後のご褒美コンテンツへ誘導。

---

## ペア機能

### `pair_screen.dart`
- **概要**: 匿名ペアとの交流を管理する画面。

### `pair/pair_matching_screen.dart`
- **概要**: ランダムマッチング実行中に表示される待機画面。

### `pair/chat_screen.dart`
- **概要**: ペアとコミュニケーションをとるためのチャット画面。

### `pair/buddy_list_screen.dart`
- **概要**: 過去のペアや現在のペアをリスト表示する画面。

---

## 進捗・設定

### `stats_screen.dart`
- **概要**: ユーザーの進捗状況を可視化する画面。
- **機能**:
  - **現在の継続日数（Streak）**
  - **目標設定**
  - **週次進捗グラフ**
  - **カレンダーヒートマップ**

### `profile_screen.dart`
- **概要**: ユーザーの公開プロフィール画面。

### `settings_screen.dart`
- **概要**: アプリ全体の各種設定を行う画面。

### `notification_settings_screen.dart`
- **概要**: プッシュ通知（リマインダー）の時刻を設定する画面。

---

## その他

### `policy_viewer_screen.dart`
- **概要**: 利用規約やプライバシーポリシーなどのドキュメントを閲覧する画面。

### `support_screen.dart`
- **概要**: ヘルプ、FAQ、問い合わせ先などを提供する画面。