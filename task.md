1日3タップで“続く”匿名ペア習慣アプリ P0/P1 要件チェックリスト
このチェックリストは、アプリのリリースに向けたP0（必須）およびP1（推奨）の要件、ならびに最終ゲート基準をまとめたものです。

💡 プロダクト/UX（体験の核） P0
[x] 価値仮説の一文定義: 「1日3タップで“続く”匿名ペア習慣アプリ」。全UI文言と矛盾がないか確認

[x] 主導線の最短化: Home → Record → Celebration → Home の1往復所要タップ数 ≤5

[x] ファーストラン体験: Onboarding 2–3枚＋通知許諾プレプリ（理由明示）→匿名Login→Home まで90秒以内

[x] 空状態（Empty State）: Home/Quests/Stats/Pair/Settings 各画面の「未設定時」コピーと誘導を実装

[x] 記録失敗時の救済: オフライン/権限拒否/カメラ失敗の各リカバリ動線を提示（再試行/後で通知）

[x] 祝福演出の最適化: 0.8–1.2秒の軽量コンフェッティ＋「次の1件へ」ボタン

[x] 習慣の摩擦最小化: 毎日3件の推奨枠を固定表示（スワップ/スヌーズは1アクション）

[x] 通知UX: 朝夕+補助の最大3回。押下でRecord直行。ミス押下時の戻り導線

🛠️ 機能要件（MinQ固有） P0
[x] クエスト開始/停止/削除: start/pause/delete の整合（ストリーク影響ルール明文化）

[x] 証跡タイプ: チェック/写真の双方を選択・切替可（既存ログは保持）

[x] ペア機能: マッチング→ハイファイブ→再マッチ。ブロック/通報/解除の基本導線

[x] ヒートマップ/ストリーク: 日次反映、タイムゾーンズレ検出（ローカル→UTC補正）

[x] 通知スヌーズ: +10分/+1時間/明日 の3択

[x] 匿名ログイン＋任意Google連携:（iOSでGoogleを出す場合、SIWA要否の方針決定）

💬 情報設計/文言 P0
[x] 用語統一: Quest/Pair/Record/High-five などをアプリ内で統一

[x] 説明最小核: 各画面の1行ヘルプ（ツールチップorミニチュートリアル）

[x] 日本語・英語切替（必要ならP1）: ローカライズキー化＋未翻訳検出

🎨 UIデザイン/テーマ P0
[x] デザイントークン集約: 色/角丸/影/スペース/タイポをTheme拡張に移行（直書きを撲滅）

[x] ダークモード: コントラスト比AA以上、画像/アイコンの反転確認

[x] タップ領域: 主要ボタン 48×48px 以上、連打時の多重処理を抑止（debounce/lock）

[x] 読み込み/骨組み: Shimmer/Skeleton導入（Home/Quests/Record/Pair/Stats）

[x] アクセシビリティ: フォントスケール 1.3× まで崩れない、TalkBack/VoiceOver操作確認

💻 アーキテクチャ/コード品質 P0
[ ] 状態管理の一貫: 全画面をRiverpodのref.watchへ接続（モック除去）

[x] ルーティング規約: GoRouterの命名/引数/DeepLink表をConfluence等に固定化

[ ] レイヤ分離: UI/UseCase/Repository/DB/Remoteの依存方向をCIでチェック（dep guard）

[x] Feature Flag: リモート殺しスイッチ（Remote Config）で実験機能を段階公開

[x] ロギング規約: log.info/warn/errorの粒度・PII禁止ルール

💾 データ/同期/オフライン P0
[ ] Isarスキーマ凍結: v1のMigration手順書（破壊的変更禁止、移行テスト）

[ ] Firestore同期: リトライ/指数バックオフ/衝突（last-write-wins or merge）方針

[ ] EXIF/PII対策: 写真保存時にEXIF削除・サムネ圧縮・ファイル名ハッシュ化

[x] バックアップ方針: ユーザーデータのエクスポート/削除APIとUI（必須：Apple審査）

[ ] 時刻一貫性: 端末時刻改変耐性（NTPライク簡易検査 or サーバ基準）

🛡️ セキュリティ/プライバシー/法務 P0
[x] プライバシーポリシー: 日本語/英語、収集データと利用目的、連絡先、削除依頼手順

[x] 利用規約/コミュニティガイドライン: ペア間ハラスメント/不正の禁止と対応策

[x] 年齢規定: 13+ 明記。未成年の保護方針（保護者同意の扱い）

[x] 通報・ブロック導線: 各ペア画面に常設（3タップ以内）。通報受領→対応SOP

[x] 端末権限文言: カメラ/通知の許可理由をローカライズ（iOS Info.plist / Android Manifest）

[ ] 通信: 全通信TLS、証跡URLの署名付き短期有効期限

[x] ログ: PII/画像URL/トークンをログ出力禁止、サニタイズ済みメタのみ

[x] **Data Safety（Play）/Privacy Nutrition（App Store）**の申告原稿作成

[ ] アカウント削除（アプリ内）: ワンタップで申請→即時/一定期間後の削除実行（Apple 5.1.1対応）

🔔 通知/バックグラウンド P0
[ ] タイムゾーン対応: ユーザー移動時の再スケジュール

[ ] 重複通知防止: 同一クエストの近接通知をまとめる

[ ] 押下ディープリンク: 通知→Record対象へ直接遷移

[ ] 失敗ハンドリング: 権限拒否時の代替（ホーム上バナー/翌朝一括）

🚀 パフォーマンス/安定性 P0
[ ] 起動時間: コールドスタート ≤2.5秒（実機中級端末）

[ ] バンドル最適化: 不要依存削減、画像/アニメ圧縮、AOT/拆分ABI

[ ] メモリ/CPUメトリクス: バックグラウンド遷移のリーク検知

[ ] クラッシュフリー率: 内部テストで ≥99.5%（Crashlytics/Sentry）

[ ] ネットワーク耐性: 3G/オフライン/復帰の自動再送

✅ QA/テスト P0
[ ] テストピラミッド: ユニット（Provider/UseCase）→Widget（Golden）→E2E（integration_test）

[ ] マトリクス実機: iOS 15/16/17、Android 9–14、画面比、暗/明、日英、低速回線

[ ] 権限系テスト: 拒否/後付与/一時的許諾の分岐網羅

[ ] 時刻/通知テスト: DST/タイムゾーン跨ぎ、端末時刻変更

[ ] 回帰セット: リリース前に手動30分のスモーク（主導線7シナリオ）

📈 分析/改善基盤 P0
[x] イベント設計: onboarding_complete, quest_started, record_saved, streak_n, pair_matched, notif_open

[ ] KPIダッシュボード: D1/D7留存、日次完了率、通知開封率、クラッシュ率

[ ] Remote Config: 通知時刻の初期値/本数、推奨クエスト配信のAB実験

🛍️ ストア準備（Play/App Store） P0
[ ] アプリアイコン/スプラッシュ: 各解像度生成（iOS/Android）

[ ] スクリーンショット: 5–8枚 × 明暗（iPhone 6.7/6.1、Android 1080×1920 など）

[ ] 短文/長文説明: 一貫メッセージ、主要キーワード（習慣化/匿名/3タップ/ペア）

[ ] 年齢レーティング: 各質問票の準備（暴力・ユーザー生成コンテンツの扱い）

[ ] コンテンツ権利: 素材/フォント/効果音のライセンス表記ページ（OSS含む）

[ ] アプリ内サポート: 問い合わせ（メール/フォーム）とFAQリンク

[ ] バージョニング: SemVer＋ビルド番号の運用表、CHANGELOG

⚙️ リリース運用/CI P0
[ ] 署名: Android Keystore保管（複製＋秘密分散）、iOS 証明書/プロビジョニング整備

[ ] CI/CD: GitHub Actions/Codemagicでlint/test/build/upload（内部テスト/TFへ）

[ ] リリース手順書: ブランチ戦略、タグ、ロールアウト％、ロールバック手順

[ ] 障害対応Runbook: 重大バグ時のフラグOFF→ホットフィックス→連絡テンプレ

[ ] 監視: クラッシュ/ANR/パフォーマンス/通知配信の常時監視設定

🤝 コミュニティ/安全性 P0
[x] 通報SOP: 受領→初動24h以内→対応→ユーザー連絡の定型

[ ] 不正対策: スパム通報のレート制限、連投画像の類似検知（P1でも可）

[ ] ガイドラインUI: 初回ペア成立時に簡易遵守事項を提示（写真の個人情報禁止 等）

✨ P1（推奨・MVP後に強化）
[ ] SIWA（Sign in with Apple）対応の要否整理（iOSでGoogleを出す場合）

[ ] 端末バックアップ/機種変更引継ぎUX（匿名→後付け連携）

[ ] リッチ統計: 週次トレンド、カテゴリ別達成率、自己比較

[ ] フィードバック収集: アプリ内NPS/問い合わせフォーム

[ ] アプリアイコンAB（Remote Configで切替）

[ ] 多言語展開（英語/韓国語など）とストア翻訳

[ ] オンデバイス軽微モデレーション（不適切画像の疑義検出）

[ ] マーケ計測（UTMディープリンク、アトリビューションSDK検討）

[ ] 収益化実験（広告は体験阻害大：まずは寄付/サブスクの準備だけ）

🚀 最終ゲート（公開前の“合格基準”）
[ ] クラッシュフリー率 ≥99.5%

[ ] D1留存 ≥45%（クローズドテスト）、通知開封率 ≥20%

[ ] コールドスタート ≤2.5秒、アプリサイズ ≤80MB（iOS/arm64、Android/abi分割）

[ ] 権限拒否・オフラインでも主導線が成立

[ ] プライバシー/利用規約/削除導線の三点セットがアプリ内で確認可能

[ ] ストア審査質問票（データ安全/年齢/コンテンツ）に一切の矛盾なし

[ ] モバイルUIフォルダ（C:\モバイルアプリ\モバイルUI）内の深い位置にあるコードファイルと画像ファイルを見て、アプリに必要なUI機能の実装かつユーザ体験を損なわないために、UI/UXに関して、常に最善を目指すこと
