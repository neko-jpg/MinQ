プロジェクトタスクチェックリスト (リセット版)
このリストは、全てのタスクを未完了（[]）の状態に戻し、プロジェクトの新たな出発点とするために作成されました。

- [ ] 🔧 Lint-zeroキャンペーン (2,000件以上の解析エラーを修正)

P0 (必須・不具合/統一) - マストハブ
[ ] 色統一: カード背景を tokens.surface に統一（Darkは RGB(61,68,77)）。直指定色を撤去。

[ ] Onboarding: ColorScheme 直参照 → すべて context.tokens に置換。_FeatureCard は CardTheme 準拠。

[ ] Riverpodエラー対策: ref.listen → ref.listenManual に変更し ProviderSubscription を dispose() で close()。

[ ] BOTTOM OVERFLOWED対策: SafeArea、SingleChildScrollView+viewInsets余白、ConstrainedBox(minHeight)、Expanded/Flexible 徹底。

[ ] 認証フロー完成: Google/Apple/Email、失敗/再試行、初回プロフィール初期化。

[ ] MiniQuest CRUD: 作成/編集/削除/並び替え、通知スケジュール。

[ ] 進捗ログ: 記録/取り消し、日跨ぎ・タイムゾーン処理。

[ ] Stats確定: 連続日数・7日達成率・当日完了数、0件時の行動喚起カード。

[ ] ペア機能の安全: 匿名、通報/ブロック、NGワード基本フィルタ。

[ ] プロフィール実データ化: Firestore連携、ダミー撤去ボタンを押したときにしっかりとすべての機能がつかえるようにする。

[ ] 同期バナー: 表示条件整理、表示後 acknowledgeBanner()。

[ ] エラーUX標準化: SnackBar/Dialog/EmptyState のガイド適用。

[ ] 戻るボタンや、×ボタンが機能するか確認さらにAndoroidアプリでの戻るボタンでも確認、Appleユーザように戻るボタンも配置かつ機能しているかも確認

[ ] 'package:flutter_riverpod/src/consumer.dart': Failed assertion: line 600 pos 7: 'debugDoingBuild': ref.listen can only be used within the build method of a ConsumerWidget See also: https://docs.flutter.dev/testing/errors　このエラーを直してhome画面と進捗画面が表示されるようにし色統一がされていることを確認する。

P1 (体験磨き) - UX改善
[ ] ボタン規格統一: minq_buttons.dart にVariant集約（Elevated/Outlined/Text）。

[ ] カード様式統一: 枠線/角丸トークン統一。

[ ] ローディング: リスト=スケルトン、ボタン=スピナー、グラフ=フェード。

[ ] i18n: ハードコード文言抽出→.arb、ja完了/en雛形。

[ ] Onboarding短縮: 最大3枚、通知許可→初回クエスト作成へ直行。

[ ] 共有カード調整: 余白/フォント/エクスポート解像度統一。

[ ] DeepLink/Push: 通知タップで対象画面へ遷移。

[ ] 設定: バックアップ/JSONエクスポート、複数リマインド時刻。

[ ] 空状態コピー統一: 次アクション提示。

[ ] アクセシビリティ: Semantics、48dpタップ、TextScale 1.3対応。

[ ] 画像最適化: cacheWidth/Height 指定の徹底。

[ ] ナビ/コピー統一: 肯定=右、否定=左、CTA表現統一。

P2 (成長/収益/運用/技術負債) - 拡張性と安定性
P2-1. アナリティクスと収益
[ ] Analytics設計: Auth→Onboard→QuestCreate→Complete→Share のイベント定義。

[ ] Remote Config/A-B: コピー/CTA配置の実験基盤。

[ ] モネタイズ方針: AdMobの配置ポリシー（実行導線では非表示）、サブスク権限の下準備。

[ ] 招待/リファラ: 招待リンク、導線計測。

P2-2. デザインシステムとアクセシビリティ
[ ] 祝アニメーション: ペア成立時の軽量アニメ。

[ ] 高度統計/CSV出力: 期間比較、エクスポート。

[ ] QAチェック: 端末サイズ/ダーク・ライト/オフライン動作の回帰テスト。

[ ] テーマトークン監査: Spacing/Radius/Elevation/Border を定義・未使用色削除。

[ ] タイポグラフィ階層定義:（H1–H6、Body、Caption、Mono）。

[ ] ベースライングリッド適用:（4/8px）とマージン統一。

[ ] コントラスト検証:（WCAG AA/AAA）と不適合箇所修正。

[ ] Magic Number撤去:→全てトークン化。

[ ] EdgeInsets直書き撤去:→Spacingトークンへ置換。

[ ] アセットアイコン統一:（アイコンセット固定・不要削除・ツリーシェイク）。

[ ] Reduce Motion対応:（OS設定でアニメ無効）。

[ ] ハプティクス規格:（成功/警告/軽タップの統一）。

[ ] フォーカスリング/アクセント色: のキーボード操作対応。

P2-3. UIコンポーネントとエラー処理
[ ] SnackBarグローバルマネージャ導入:（重複排他）。

[ ] ダイアログ/ボトムシートの標準コンポーネント化。

[ ] 空状態イラスト/アイコンのスタイル統一。

[ ] フォームValidationメッセージ統一:（行内/下部どちらかに統一）。

[ ] IMEオーバーラップ検証:（長文入力・日本語変換中）。

[ ] TextOverflowポリシー統一:（ellipsis/softWrap）。

[ ] 画像プレースホルダ/失敗時のFallback実装。

[ ] Hero/ImplicitアニメのEasing/Duration規格化。

[ ] タブ/BottomNavのバッジ規格:（数値/点表示）。

[ ] スクロール到達インジケータ:（EdgeGlow/Scrollbar統一）。

P2-4. アーキテクチャとテスト
[ ] ProviderObserver導入:（Riverpod遷移ログ）。

[ ] AsyncValue.guard の標準化:（例外→UI表現変換）。

[ ] Repositoryインターフェース化＋Fake実装。

[ ] Now/Clock Provider導入:（時刻依存のテスト容易化）。

[ ] AutoDispose/keepAlive の方針整理。

[ ] 依存循環検知:（import_lint設定）。

[ ] Navigatorガード:（未ログイン時の保護）。

[ ] flutter_lints強化＋analyzer拡張:（prefer_const/avoid_print等）。

[ ] import順序/未使用警告ゼロ化:（lint-staged）。

[ ] pre-commitフック:（format/lint/test）。

[ ] Dart-defineで環境切替:（dev/stg/prod）。

[ ] Flavor別Firebaseプロジェクト分離。

[ ] Logger導入:（JSON構造ログ）。

[ ] Crashlytics導入:（非致命ログ＋キー/パンくず）。

[ ] Performance Monitoring:（起動/描画/HTTPトレース）。

[ ] Sentryオプション:（リリースビルドのみ）。

[ ] Renovate/Dependabot設定:（依存更新）。

[ ] GitHub Actions: Lint/Test/Build/Artifacts。

[ ] CIでgoldenテスト差分チェック。

[ ] Fastlane:（署名/ビルド番号/配布自動化）。

[ ] コードカバレッジ収集:（閾値設定）。

[ ] Conventional Commits:＋自動CHANGELOG生成。

[ ] CODEOWNERS/レビュー規約。

[ ] ユニットテスト:（Notifier/Repo）。

[ ] ウィジェットテスト:（主要画面の状態分岐）。

[ ] ゴールデンテスト:（デバイス3種・ライト/ダーク）。

[ ] integration_test:（認証→作成→達成→共有フロー）。

[ ] パフォーマンステスト:（初回描画/フレームドロップ）。

[ ] 回帰テストシナリオ表作成:（手動QA）。

P2-5. Firebase/インフラストラクチャ
[ ] Firestoreルールv2整理:（最小権限・ロール分離）。

[ ] ルールユニットテスト:（エミュレータ）。

[ ] インデックス/複合インデックス定義。

[ ] TTL/ソフトデリート方針。

[ ] 一意制約:（Cloud Functionsで強制）。

[ ] オフライン永続化/キャッシュ上限設定。

[ ] 競合解決ポリシー:（last-write-win/merge）。

[ ] リトライ/バックオフ:（ネット不安定時）。

[ ] 書込レート制御:（料金最適化）。

[ ] データモデル版管理/移行スクリプト。

[ ] BigQueryエクスポート有効化。

P2-6. 通知とディープリンク
[ ] 通知チャンネル定義:（Android：重要/通常/消音）。

[ ] 通知アクション:（完了/スヌーズ）。

[ ] まとめ通知:（デイリーサマリ）。

[ ] iOS provisional許可対応:（静かに配信）。

[ ] DeepLinkパラメタ検証/サニタイズ。

[ ] Android App Links/ iOS Universal Links整備。

[ ] Webフォールバックページ:（DeepLink失敗時）。

P2-7. App Storeとプラットフォーム連携
[ ] In-App Review導線。

[ ] In-App Update:（Android柔軟更新）。

[ ] Widget対応:（iOS/Androidホームウィジェット）。

[ ] Quick Actions / App Shortcuts。

[ ] 共有シートエクスポート:（画像/テキスト）。

[ ] アバターアップロード:（Crop/圧縮）。

[ ] 画像ストレージリサイズ:（Functionsで生成）。

[ ] CSV/JSONエクスポート/インポート。

[ ] カレンダー連携:（ICS出力）。

[ ] バックアップ/リストア:（Drive/Files）。

P2-8. ペア機能の高度化とモデレーション
[ ] モデレーション方針:（ペア機能：通報→審査→措置）。

[ ] NGワード辞書更新フロー。

[ ] レート制限/スパム対策:（Cloud Functions）。

[ ] ブロック/ミュート実装拡張:（期間/解除）。

[ ] マッチング設定:（時間帯/言語/目的）。

[ ] 再マッチ回避/クールダウン。

P2-9. ユーザ体験の磨き込み
[ ] Onboarding計測:（ステップ別離脱）。

[ ] コーチマーク/チュートリアル。

[ ] ライフログのテンプレ/おすすめ導線。

[ ] 習慣の一時停止/スキップ/凍結日:（Streak保護）。

[ ] スヌーズ/Do Not Disturb時間帯。

[ ] スマート提案:（過去実績→通知時刻提案）。

[ ] バッジ/実績/週次チャレンジ。

[ ] ペアスコアボード/軽量ランキング。

[ ] 多言語整形:（日時/数値/通貨/単位）。

[ ] Bidi対応:（RTL検証）。

[ ] 日本語固有表記:（全角/半角/長音）方針。

[ ] 曜日/祝日表示:（ロケール準拠）。

P2-10. 端末対応とパフォーマンス
[ ] 端末マトリクスQA:（小/中/大/折りたたみ/タブ）。

[ ] セーフエリア/ノッチ/ホームインジケータ検証。

[ ] 画面回転/ランドスケープ制御。

[ ] 低速端末/低メモリ耐性。

[ ] 起動時間短縮:（遅延初期化/画像プリフェッチ）。

[ ] ABI別分割/圧縮:（Android App Bundle最適化）。

[ ] 未使用アセット/フォント削除。

[ ] ベクター化:（PNG→SVG/PNGW）。

[ ] 背景Isolateで重処理:（集計/書き出し）。

P2-11. 法務とリリース運用
[ ] 法務: 利用規約/プライバシーポリシー整備。

[ ] データセーフティフォーム:（Play Console）。

[ ] アカウント削除/データ削除導線:（GDPR/個人情報保護法）。

[ ] 年齢配慮/ペア機能の年少者保護。

[ ] 追跡拒否トグル:（Do Not Track）。

[ ] メタデータ多言語化/ASOキーワード。

[ ] 内部テスト/クローズドテスト/オープンβ運用。

[ ] プレローンチレポート対応:（クラッシュ/互換）。

[ ] バグ報告機能:（スクショ添付/ログ同梱）。

[ ] ストア素材作成:（スクショ/動画/アイコン/説明文）。

[ ] インアプリFAQ/ヘルプ/問い合わせ。

[ ] 稼働監視ダッシュボード:（障害/指標）。

[ ] Slack/メール通知:（重大イベント）。

[ ] リモートフラグのキルスイッチ。

[ ] 実験テンプレ:（対象/指標/期間）。

[ ] 料金/権限のフェンス:（無料/有料機能切替）。

[ ] リファラ計測:（招待リンク/詐欺対策）。

[ ] 変更履歴/お知らせセンター。

[ ] テックドキュメント整備:（ARCHITECTURE.md/RUNBOOK.md）。

[ ] デザインシステムガイド:（色/タイポ/モーション）。

[ ] TODO/DEBT棚卸しと優先度付け。

[ ] 依存パッケージのライセンス表記。

P2-12. その他高度な機能・改善
[ ] FCMトピック設計:（ニュース/週次まとめ）。

[ ] バックグラウンド同期の窓口:（WorkManager等）。

[ ] タイムゾーン異常/うるう年/月末処理の境界テスト。

[ ] DND中の通知延期ロジック。

[ ] 連続通知抑制:（デバウンス/バッチ）。

[ ] 例外セーフガード:（エラーバウンダリ相当の画面）。

[ ] ネットワーク断/機内モード時のデグレード表示。

[ ] CDN/HTTPキャッシュ戦略:（外部静的アセット用）。

[ ] 入力サニタイズ:（DeepLink/外部入力全般）。

[ ] Play Integrity APIの検討:（改ざん対策）。

[ ] アプリ内時刻表現の一貫性:（相対/絶対の規則）。

[ ] アプリ起動スプラッシュ画面の統一:（ライト/ダーク/ロゴ解像度）。

[ ] ダークモード切替を即時反映:（再起動不要）。

[ ] アクセントカラーをユーザ設定で切替可能に:（青/緑/紫系など）。

[ ] フォントサイズ変更UI:（ユーザが調整可能）。

[ ] プロフィールのニックネーム重複検証。

[ ] ペア機能での「おすすめユーザ」表示:（条件：アクティブ度・時間帯）。

[ ] タスク/習慣のタグ機能:（分類・検索用）。

[ ] クエストのアーカイブ機能:（削除せず非表示）。

[ ] クエストのリマインド複数設定:（朝・昼・夜）。

[ ] クエストの優先度ラベル:（高/中/低）。

[ ] 達成画面のアニメーション追加:（祝福演出）。

[ ] Statsでの週単位・月単位切替。

[ ] Statsのグラフにツールチップ追加:（正確な数値表示）。

[ ] データエクスポートをPDF形式でも提供。

[ ] サーバーメンテナンス時のメッセージ画面。

[ ] オフラインモード時のUI表示改善:（読み取り専用モード）。

[ ] 通知タップで直接「今日のクエスト一覧」へ遷移。

[ ] 機種変更時のデータ移行ガイド:（Google Driveバックアップ）。

[ ] ストリーク途切れ時のリカバリー機能:（課金や広告視聴で保護）。

[ ] ペアの進捗比較画面:（自分と相手のグラフ並列）。

[ ] ペア解消機能:（トラブル時に一方解除可）。

[ ] ペアリマインド通知:（相手が未達成ならプッシュ）。

[ ] サーバーレスポンス遅延時のリトライUI。

[ ] バージョンアップ時の変更点案内:（What’s New画面）。

[ ] バージョン互換チェック:（古いクライアントを警告）。

[ ] ストア評価リクエスト導線:（一定利用後に表示）。

[ ] SNSシェア時のOGP画像生成:（クエスト達成バナー）。

[ ] ユーザ削除時の二重確認:（誤操作防止）。

[ ] 通知の曜日/祝日カスタム:（休みの日は通知しない）。

[ ] 習慣テンプレート集:（例：朝ラン・読書・日記）。

[ ] 習慣提案AI:（過去の記録から推奨）。

[ ] 習慣に「難易度」属性追加:（簡単/普通/難しい）。

[ ] 習慣に「推定時間」属性追加:（5分/15分/30分）。

[ ] 習慣の「場所」属性:（ジム/自宅/図書館）。

[ ] 習慣の「連絡先」リンク:（例：ペアのLINE）。

[ ] 音声入力でクエスト作成。

[ ] 習慣実行時のタイマー機能。

[ ] 習慣実行中のBGM:（集中モード）。

[ ] ペア同士の軽いチャット:（スタンプ/定型文のみ）。

[ ] 不正利用検出:（短時間で大量クエスト完了→警告）。

[ ] 利用時間制限:（親子モード）。

[ ] デバイス通知音のカスタム。

[ ] アプリ内での「よくある質問」ヘルプセンター。

[ ] フィードバック投稿フォーム:（Googleフォーム連携）。

[ ] アプリ内アンケート:（UI改善用）。

[ ] バッジシステム:（7日連続達成・30日達成）。

[ ] アチーブメント一覧画面。

[ ] プロフィールに「獲得バッジ数」表示。

[ ] イベントモード:（期間限定クエスト）。

[ ] チーム習慣:（ペア以上＝複数人での達成競争）。

[ ] イベントランキング:（習慣数で競う）。

[ ] ISO 27001/SOC 2準拠のセキュリティポリシー策定。

[ ] 差分バックアップ+暗号化ZIPのユーザ直接DL機能。

[ ] マルチリージョンFirestore→Datastoreレプリケーション設計。

[ ] CDNヘッダ最適化:（Cache-Control/Etag/ Brotli自動）。

[ ] アプリ起動時プリロード戦略:（Warm-up isolate／DWU削減）。

[ ] Chaos Testing:（ネット断・メモリ圧迫・時刻改変）。

[ ] Fuzz Testing:（フォーム入力の異常系自動生成）。

[ ] ライブラリアップデート自動PR:（Renovate Bot）。

[ ] 開発用データシードスクリプト:（faker付き）。

[ ] Monorepo化＋Melos/Very Good CLI導入。

[ ] Dart API docs → pub.dev公開自動生成。

[ ] タグ/検索バー搭載:（習慣名・タグ・説明全文検索）。

[ ] AIレコメンド:（達成率・時間帯で次の習慣提案）。

[ ] パーソナライズPush:（RFM分析で送信頻度調整）。

[ ] ACR Cloud連携でBGM自動タグ付け:（集中曲提案）。

[ ] スクリーンリーダー最適化:（ロール/ヒント/読み順確認）。

[ ] カラーコントラスト自動検証CI:（WCAG 2.2 AA）。

[ ] 日本語漢字変換中のIME候補被りテスト。

[ ] 祝日API同期:（各国ローカル通知自動スキップ）。

[ ] DST/うるう秒/閏年パスケース単体テスト。

[ ] オフライン完全モード:（IndexedDB＋PWA用）。

[ ] PWAインストールバナー＆Add to Home Screen対応。

[ ] Mac/Winネイティブビルド:（Flutter Desktop、menu bar timer）。

[ ] Wear OS/Apple Watchクイックチェックアプリ。

[ ] HealthKit/Google Fit連携:（歩数→習慣自動達成）。

[ ] GPT-4o埋め込みチャットサポートBot:（問い合わせ自動回答）。

[ ] アプリ内コミュニティ掲示板:（モデレーション付き）。

[ ] カスタムWebhook IFTTT/Zapier連携。

[ ] Carbon footprint計測:（CI/CD & ランタイム）。

[ ] グリーンダークモード:（OLED省電力配色）。

[ ] 動画チュートリアル生成パイプライン:（Lottie＋TTS）。

[ ] Live Activity / Android Live Widget:（進捗リアルタイム表示）。

[ ] Stripe Billing Portal統合:（サブスク管理セルフサービス）。

[ ] アプリ内投げ銭:（Sponsor block ads 解除）。

[ ] Referral Code deep link:（友達招待→報酬）。

[ ] ユーザートークン制Rate Limiter:（機能乱用対策）。

[ ] 地理的位置連動通知:（ジオフェンス：ジム到着→習慣リマインド）。

[ ] 画像生成AIでSNS共有バナー自動作成。

[ ] 高齢者向けアクセシビリティ設定:（特大UI・音声読み上げ速度）。

[ ] プログレッシブオンボーディング:（機能解放レベル制）。

[ ] Feature flag kill-switch即時反映:（Remote Configのみで停止）。

[ ] KPIダッシュボード自動Snapshot→Slack送信。

[ ] バックエンドコストアラート:（Firestore/Functions超過時）。

[ ] ユーザー行動ヒートマップ:（RepaintBoundary＋解析）。

[ ] 自己診断モード:（設定→テスト通知/ストレージ/ネット）。

[ ] 脆弱性SCA:（Software Composition Analysis）定期実行。

[ ] 法域別プライバシーコンプライアンス:（COPPA/CCPA/OHCA）。

[ ] パブリックAPI公開:（Personal Access Token＋Rate Limit）。

[ ] OSS公開計画:（ライセンス選定、CONTRIBUTING.md）。

2024-02-09 追加対応メモ (リセット)
[ ] Reduce Motion対応: animation_system.dart と Skeleton/チャット送信UIで MediaQuery.disableAnimations を尊重し、動きを抑制しました。

[ ] フォーカスリング/アクセント色: focus_system.dart をトークンベースのカラー解決とセマンティクス強化に更新しました。

[ ] コントラスト検証: contrast_validator_test.dart を追加し、WCAG準拠の閾値を自動テストしました。

[ ] TextOverflowポリシー統一: text_overflow_policy_test.dart でタイトル/本文のオーバーフロールールを検証しました。

[ ] 画像プレースホルダ/失敗時のFallback: image_placeholder.dart にセマンティクスとトークン半径、Reduce Motion対応のアニメーション調整を追加しました。

[ ] アクセシビリティ: Semantics: フォーカス可能ウィジェットとオフラインバナーにセマンティクスを付与しスクリーンリーダー対応を強化しました。

[ ] Magic Number撤去: シェアカードやチャット入力などの余白・サイズを context.tokens に置き換えました。

[ ] EdgeInsets直書き撤去: offline_mode_indicator.dart などでSpacingトークンへ置換しました。

[ ] ローディング: Skeletonローダーに静的フォールバックを追加し、Reduce Motion時はアニメーションを停止するようにしました。

[ ] QAチェック: test/presentation/theme 配下のユニット/ウィジェットテストを追加し、UIトークン周りの回帰を防止しました。
