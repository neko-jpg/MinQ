Executive Summary

このレビューでは、MinQアプリのfeat‑debug‑nowブランチをオフラインファーストの視点から包括的に監査しました。ユーザーがオフラインでも快適に利用できる体験を実現するために、以下の重要な課題を抽出しました。

ハードコーディングされた色の使用 (P1〜P2) – オフラインバナー、ログイン画面、プロフィール設定画面など複数の箇所でColors.orangeやColors.whiteなど直接色を指定しており、テーマトークンによる一貫したビジュアルを阻害しています。この状態ではダークモードや将来のブランド刷新に対応できません。

詳細画面への遷移方法 (P2) – 通知経由のディープリンクがcontext.goで詳細画面へ遷移しており、タブの履歴が失われています。戻る操作が不自然になりUXが低下するため、詳細画面はcontext.pushを用いる必要があります。

オフラインファーストが不完全 (P1) – プロフィール更新はIsarに楽観的書き込みを行うものの、Supabaseへの同期処理が存在せず、複数デバイス間の一貫性が保たれていません。同期状態をUIで示すステータス表示も不足しています。

オンボーディングおよびAIコーチの改善余地 (P2〜P3) – コンテキスト依存のヒント表示やAIコーチのシステムプロンプトが未実装/静的であり、ユーザーの進捗やストリークに合わせたアドバイスを提供できていません。

L10nとテスト体制 (P2〜P3) – 一部の文言が.arbに登録されておらず、日本語・英語の両対応が不足しています。また、主要な画面や機能に対するゴールデン/ウィジェット/統合テストが乏しく、回帰防止の仕組みが弱いです。

これらの問題に対して、トークン駆動のテーマ適用、ナビゲーションパターンの見直し、非同期同期キューの実装、動的AIコーチの導入など具体的な修正案とテスト計画を提示します。詳細は各ファイルの考察をご確認ください。