Findings Summary Table
ID	Severity	Area	File(s)	Symptom	Likely Root Cause	Fix (概要)	Tests
F001	P2	Theming	offline_banner.dart:L21–L40, L114–L130, L166–L205	オフラインバナーと読み取り専用インジケータ、スナックバーでColors.orangeやColors.whiteを直接使用しており、テーマに準拠していない。	トークン駆動デザインへの移行途中で未修正のまま残っていたため。	MinqThemeからaccentWarningやprimaryForegroundを参照するように変更し、必要なimportを追加する。	ゴールデンテスト: OfflineBanner displays warning colors according to theme
F002	P2	Navigation	notification_navigation_handler.dart:L19–L49	通知からのディープリンクで詳細画面へ遷移する際にcontext.goを使用しており、タブ履歴が失われる。	GoRouterの使い分けルールの認識不足により、全ての遷移にgoを使ってしまっている。	今日のクエスト・クエスト詳細・ペア・実績画面など詳細画面はcontext.pushで開くように修正。	ウィジェットテスト: Notification tap navigates using push and preserves shell state
F003	P2	Theming	login_screen.dart:L24–L29, L106–L108, L126–L128	SnackBarのアクション文字色や背景エフェクトにColors.whiteやColors.blackを使用している。	トークン駆動テーマへの完全移行が行われておらず、一部ハードコードが残っている。	SnackBarアクションや装飾の色をcontext.tokens.primaryForeground、シャドウをtokens.textPrimary.withOpacity(...)へ置き換える。	ゴールデンテスト: LoginCard uses theme tokens for snack bar and shadow
F004	P2	Theming	profile_setting_screen.dart:L40, L145, L342, L386, L671	プロフィール設定画面においてダミーモード警告や編集アイコン、ダミーデータ削除ボタン、プレミアム機能のアイコンなどでColors.orange・Colors.white・Colors.red・Colors.amberを使用。	テーマトークンの利用範囲が不徹底で、個別UI要素がハードコーディングされている。	tokens.accentWarning・tokens.primaryForeground・tokens.accentError・tokens.encouragementを用いて色指定を置換。	ウィジェットテスト: ProfileSettingScreen respects theme tokens
F005	P3	Onboarding	onboarding_engine.dart:L206–L216	初回クエスト作成・初回完了・ストリーク達成時に表示するヒント用メソッドが空実装。	仕様が未確定のままメソッドだけ追加され、具体的なガイド表示が後回しになっている。	各メソッドでScaffoldMessengerやOverlayを利用してガイドダイアログやトーストを表示し、SharedPreferencesで重複表示を防ぐ。	テスト: ProgressiveHint shows correct messages based on user progress
F006	P1	Offline	user_repository.dart (saveLocalUser)他	プロフィール編集がローカルDBにのみ保存され、Supabaseへの同期キューやUIの同期状態表示が存在しない。	オフラインファースト設計への移行途中でクラウド同期の実装が後回しになっている。	saveLocalUser後に同期ジョブをキューに追加し、SyncStatusをUIに表示する。エラー時はローカルに保持しリトライする。	統合テスト: Profile changes sync to remote when connection restored
F007	P2	AI	ai_coach_controller.dart:L32–L73	AIコーチのシステムプロンプトが静的で、ユーザーのストリークやタグを考慮したアドバイスを生成できない。	TFLiteラッパー側の生成ロジックは柔軟だが、コントローラが固定プロンプトしか渡していない。	ユーザー進捗を取得し、ストリークや最近のクエストを反映したプロンプトを構築。クイックアクション候補も提供する。	ユニットテスト: AICoachController builds system prompt based on user progress
F008	P3	Splash	splash_screen.dart:L155–L175ほか	スプラッシュ画面のグラデーションやパーティクルがハードコーディングされた色値(0xFF0A0A0Aなど)を使用。	スプラッシュのみデザイン刷新が進んでおらず、テーマとの乖離が大きい。	グラデーションをtokens.brandPrimaryとtokens.accentSecondaryで構成し、パーティクルもテーマに基づいた色を使用。メッセージ文言はL10n化する。	ゴールデンテスト: SplashScreen gradient matches theme tokens
F009	P2	Navigation	各フォーム画面 (例: edit_quest_screen.dart)	Androidバックボタン押下時に未保存データがある場合でも問答無く前画面へ戻るため、変更が失われる。	RootBackButtonDispatcherやWillPopScopeによるバック操作の制御が設計に反映されていない。	アプリのルートにRootBackButtonDispatcherを追加し、編集フォームではWillPopScopeで未保存検知と確認ダイアログを表示する。	ウィジェットテスト: Unsaved form displays confirmation on back
F010	P3	Copy	.arbファイル全般	オフライン・同期関連メッセージやプログレッシブヒントなど複数の文言がハードコードされており、翻訳が欠落している。	開発速度重視で直接文字列を埋め込んだままリリースしている。	すべてのUI文言を.arbに移動し、日本語と英語の対訳を追加する。CIで文字化けを検知するルールを追加。	テスト: Localization files contain all referenced keys
F011	P3	Testing	CI設定	.arbファイルにUTF‑8以外の文字や\uFFFDを含む場合でもCIが通過してしまう。	言語ファイルの検証がCIに組み込まれていない。	CIジョブに文字化けチェックを追加し、文字化け文字発見時にビルドを失敗させる。	テスト: CI fails on mojibake in arb files
F012	P2	Offline	全体	オフライン検知プロバイダーやNetworkStatusServiceが未実装で、ネットワーク切断時のUI切り替えができない。	オフラインファースト設計の実装が途中で止まっている。	connectivity_plus等を用いたプロバイダーを追加し、オフライン時はネットワーク依存ウィジェットを差し替える。	統合テスト: NetworkDependentWidget shows offline variant when offline