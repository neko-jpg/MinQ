# 通信の TLS ポリシー

MinQ ではすべてのネットワーク通信を TLS で保護します。リリース前の自動チェックとして `tool/tls_guard.dart` を追加し、以下のルールを強制しました。

## ルール

- `http://` の平文 URL をコードベースで禁止
- `Uri.http(...)` / `Uri.http` を使用した生成を禁止
- 許可された例外がある場合は `tool/tls_guard.dart` の allowlist に明示的に追記する

CI では `TLS Guard` ジョブが `dart run tool/tls_guard.dart` を実行し、違反があると build を失敗させます。

## 手動での確認手順

1. 外部サービスとの通信を追加する際は、まず HTTPS エンドポイントの提供有無を確認する
2. HTTPS でアクセスできない場合は採用を避けるか、VPN/Tunnel 等の代替を検討する
3. ブラウザベースの署名付き URL を扱う場合は、有効期限や署名検証を必ず実装する

上記の運用により「通信: 全通信TLS、証跡URLの署名付き短期有効期限」の要件を満たします。
