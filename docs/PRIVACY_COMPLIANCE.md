# プライバシーコンプライアンスガイド

## 概要

MinQは以下のプライバシー規制に準拠しています：

- GDPR（EU一般データ保護規則）
- CCPA（カリフォルニア州消費者プライバシー法）
- 日本の個人情報保護法
- COPPA（児童オンラインプライバシー保護法）

## GDPR準拠

### データ主体の権利

#### アクセス権
- ユーザーは自分のデータにアクセスできます
- 設定 → データエクスポート

#### 削除権（忘れられる権利）
- ユーザーはアカウントとデータを削除できます
- 設定 → アカウント削除

#### データポータビリティ権
- JSON/CSV形式でデータをエクスポート
- 他のサービスへの移行が可能

#### 訂正権
- プロフィール設定から情報を更新可能

### 同意管理

```dart
// 同意の取得
final consent = await ConsentManager.requestConsent(
  type: ConsentType.analytics,
  purpose: 'アプリの改善のため',
);

// 同意の記録
await ConsentManager.recordConsent(
  userId: userId,
  consentType: ConsentType.analytics,
  granted: true,
  timestamp: DateTime.now(),
);
```

### データ処理の法的根拠

1. **契約の履行**: サービス提供に必要なデータ
2. **正当な利益**: アプリの改善、セキュリティ
3. **同意**: マーケティング、分析

## CCPA準拠

### カリフォルニア州居住者の権利

#### 知る権利
- 収集されるデータの種類
- データの使用目的
- データの共有先

#### 削除権
- 個人情報の削除をリクエスト可能

#### オプトアウト権
- データ販売のオプトアウト（MinQはデータを販売しません）

#### 差別されない権利
- 権利行使による不利益な扱いの禁止

### Do Not Track

```dart
// トラッキング拒否の設定
await TrackingService.setDoNotTrack(true);

// トラッキング状態の確認
final doNotTrack = await TrackingService.getDoNotTrack();
```

## 日本の個人情報保護法準拠

### 個人情報の取り扱い

#### 利用目的の明示
- サービス提供
- アプリの改善
- カスタマーサポート

#### 第三者提供の制限
- ユーザーの同意なく第三者に提供しません
- 例外: 法令に基づく場合

#### 安全管理措置
- データの暗号化
- アクセス制御
- 定期的なセキュリティ監査

## COPPA準拠（13歳未満の児童保護）

### 年齢確認

```dart
// 年齢確認
final ageVerification = await AgeVerificationService.verify();

if (ageVerification.age < 13) {
  // 保護者の同意が必要
  await requestParentalConsent();
}
```

### 児童データの保護

- 13歳未満のユーザーは保護者の同意が必要
- 児童データの収集を最小限に
- 児童向け広告の禁止

## データ保持ポリシー

### 保持期間

| データタイプ | 保持期間 |
|------------|---------|
| アカウント情報 | アカウント削除まで |
| クエストデータ | アカウント削除まで |
| ログデータ | 90日間 |
| 分析データ | 匿名化後2年間 |

### データ削除

```dart
// アカウント削除
await AccountDeletionService.deleteAccount(
  userId: userId,
  reason: 'ユーザーリクエスト',
);

// 削除プロセス
// 1. 即座にアカウントを無効化
// 2. 30日間の猶予期間
// 3. 完全削除
```

## データ侵害対応

### 通知義務

- **72時間以内**: 監督機関への通知（GDPR）
- **遅滞なく**: 影響を受けるユーザーへの通知

### 対応手順

1. 侵害の検知と封じ込め
2. 影響範囲の評価
3. 監督機関への報告
4. ユーザーへの通知
5. 再発防止策の実施

## プライバシーバイデザイン

### 原則

1. **データ最小化**: 必要最小限のデータのみ収集
2. **目的制限**: 明示した目的のみに使用
3. **保存期間制限**: 必要な期間のみ保持
4. **セキュリティ**: 適切な技術的・組織的措置

### 実装例

```dart
// データ最小化
class UserProfile {
  final String id;
  final String displayName; // 必須
  // メールアドレスは保存しない（認証のみ）
}

// 匿名化
class AnalyticsEvent {
  final String eventType;
  final String anonymousUserId; // ハッシュ化されたID
  final DateTime timestamp;
  // 個人を特定できる情報は含めない
}
```

## 国際データ転送

### 標準契約条項（SCC）

- EU域外へのデータ転送にはSCCを使用
- 適切な保護措置を実施

### データローカライゼーション

- 可能な限り地域内でデータを処理
- Firebase Multi-Regionの活用

## コンプライアンスチェックリスト

- [ ] プライバシーポリシーの整備
- [ ] 同意管理システムの実装
- [ ] データ削除機能の実装
- [ ] データエクスポート機能の実装
- [ ] 年齢確認の実装
- [ ] セキュリティ監査の実施
- [ ] データ処理記録の作成
- [ ] DPO（データ保護責任者）の任命
- [ ] インシデント対応計画の策定

## 連絡先

- データ保護責任者: dpo@minq.app
- プライバシー問い合わせ: privacy@minq.app
- 法務部門: legal@minq.app
